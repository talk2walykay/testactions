name: "Terraform"

on: [push]

jobs:
  terraform:
    runs-on: ubuntu-latest
    steps:
    - name:  checkout
      uses: actions/checkout@v3
    - name:  Setup terraform
      uses: hashicorp/setup-terraform@v2
      with:
        terraform_version: 1.1.9
    - name: terraform init
      run: terraform init
    - name:  validate
      run: terraform validate
    - name: format
      run: terraform fmt -check # this line check and fail the pipeline if your terraform code is not formatted, so it is good to format it before running the code
    - name: plan
      run: terraform plan
